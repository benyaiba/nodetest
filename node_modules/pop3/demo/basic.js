var assert = require('assert');
var util = require('util');
var Fiber = require('fibers');
var pop3 = require("../lib/index.js");

var client = pop3.Client({});

var HOST = "pop3.live.com";
var USERNAME = "yisuren7@hotmail.com";
var PASSWORD = "zhao_HONGSHENG";

var fiber;
function work() {
	fiber = Fiber.current;

	client.synchronize(fiber.run.bind(fiber), Fiber.yield.bind(Fiber));
	
	console.log('connect: ', client.connect(HOST, "pop3s"));

	console.log('user: ' , client.user(USERNAME));

	console.log('pass: ' , client.pass(PASSWORD));

	console.log('list: ' , client.list());
	console.log("retr ", client.retr(5));

	console.log('quit: ' , client.quit());
	
}

Fiber(function() { work(); }).run();

